swagger: '2.0'
info:
  version: '0.1'
  title: 'cmu mars brass ta: phase 2, cp3'
schemes:
  - http
host: brass-ta
paths:
  /start:
    post:
      description: start the turtlebot navigating through the map
      responses:
        '200':
          description: SUT has begin starting the mission
        '400':
          description: >-
            SUT encountered an error trying to start the mission
          schema:
            type: object
            properties:
              message:
                type: string
                description: >-
                  human readable information about the error, if any can be
                  provided
  /perturb/light:
    post:
      description: change the state of a light in the environment
      parameters:
        - in: body
          name: Parameters
          required: true
          schema:
            type: object
            required:
              - id
              - state
            properties:
              id:
                type: string
                description: >-
                  the element of LIGHTSET whose state will be set
              state:
                type: boolean
                description: >-
                  upon response, the named light will be on if `true` and
                  `off` otherwise
      responses:
        '200':
          description: the named light has been set
          schema:
            type: object
            required:
              - sim-time
            properties:
              sim-time:
                type: integer
                description: the simulation time when the light was set
        '400':
          description: an error was encountered while setting the light
          schema:
            type: object
            required:
              - sim-time
            properties:
              sim-time:
                type: integer
                description: the simulation time when the error occurred
              message:
                type: string
                description: >-
                  human readable information about the error, if any can be
                  provided
  /perturb/sensor:
    post:
      description: change the state of one of the sensors on the robot
      parameters:
        - in: body
          name: Parameters
          required: true
          schema:
            type: object
            required:
              - id
              - state
            properties:
              id:
                type: string
                enum:
                  - kinect
                  - lidar
                  - camera
                description: >-
                  which sensor of SENSORSET to set
              state:
                type: boolean
                description: >-
                  upon response, the named sensor will be on if `true` and
                  `off` otherwise
      responses:
        '200':
          description: the named sensor has been set
          schema:
            type: object
            required:
              - sim-time
            properties:
              sim-time:
                type: integer
                description: the simulation time when the sensor was set
        '400':
          description: an error was encountered while setting the sensor
          schema:
            type: object
            required:
              - sim-time
            properties:
              sim-time:
                type: integer
                description: the simulation time when the error occurred
              message:
                type: string
                description: >-
                  human readable information about the error, if any can be
                  provided
  /perturb/nodefail:
    post:
      description: cause one of the software nodes to fail
      parameters:
        - in: body
          name: Parameters
          required: true
          schema:
            type: object
            required:
              - id
            properties:
              id:
                type: string
                enum:
                  - amcl
                  - mrpt
                  - aruco
                description: >-
                  cause the named node to fail
      responses:
        '200':
          description: the node has failed
          schema:
            type: object
            required:
              - sim-time
            properties:
              sim-time:
                type: integer
                description: the simulation time when the node failed
        '400':
          description: an error was encountered while causing the node to fail
          schema:
            type: object
            required:
              - sim-time
            properties:
              message:
                type: string
                description: >-
                  human readable information about the error, if any can be
                  provided
              sim-time:
                type: integer
                description: the simulation time when the error occurred
  /observe:
    get:
      description: >-
        observe some of the current state of the robot for visualization
        and invariant checking for perturbation end points. n.b. this
        information is to be used strictly in a passive way; it is not to
        be used for evaluation of the test at all.
      responses:
        '200':
          description: >-
            successfully computed the observation
          schema:
            type: object
            required:
              - x
              - 'y'
              - battery
              - sim-time
              - lights
            properties:
              x:
                type: number
                format: float
                description: >-
                  the current x coordinate of the bot. must be within the
                  boundaries of the map.
              y:
                type: number
                format: float
                description: >-
                  the current y coordinate of the bot. must be within the
                  boundaries of the map.
              battery:
                type: integer
                minimum: 0
                description: >-
                  the current charge of the battery, in mWh
              sim-time:
                type: integer
                minimum: 0
                description: >-
                  the time when this observation was computed, in
                  simulation seconds
              lights:
                type: array
                items:
                  type: string
                description:  >-
                  the list of names from LIGHTSET of those lights which are
                  currently turned on. all other lights are currently
                  turned off.
        '400':
          description: >-
            encountered an error while computing the observation
